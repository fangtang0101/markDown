/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

module.exports = "<p>This repo is a collection of simple demos of Webpack.</p> <p>These demos are purposely written in a simple and clear style. You will find no difficulty in following them to learn the powerful tool.</p> <h2 id=how-to-use>How to use</h2> <p>First, install <a href=https://www.npmjs.com/package/webpack>Webpack</a> and <a href=https://www.npmjs.com/package/webpack-dev-server>webpack-dev-server</a> globally.</p> <pre><code class=language-bash>$ npm i -g webpack webpack-dev-server</code></pre> <p>Then, clone the repo.</p> <pre><code class=language-bash>$ git clone https://github.com/ruanyf/webpack-demos.git</code></pre> <p>Install the dependencies.</p> <pre><code class=language-bash>$ cd webpack-demos\n$ npm install</code></pre> <p>Now, play with the source files under the repo&#39;s demo* directories.</p> <pre><code class=language-bash>$ cd demo01\n$ npm run dev</code></pre> <p>If the above command doesn&#39;t open your browser automaticly, you have to visit <a href=http://127.0.0.1:8080>http://127.0.0.1:8080</a> by yourself.</p> <h2 id=foreword-what-is-webpack>Foreword: What is Webpack</h2> <p>Webpack is a front-end tool to build JavaScript module scripts for browsers.</p> <p>It can be used similar to Browserify, and do much more.</p> <pre><code class=language-bash>$ browserify main.js &gt; bundle.js\n# be equivalent to\n$ webpack main.js bundle.js</code></pre> <p>Webpack needs a configuration file called <code>webpack.config.js</code> which is just a CommonJS module.</p> <pre><code class=language-javascript>// webpack.config.js\nmodule.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  }\n};</code></pre> <p>After having <code>webpack.config.js</code>, you can invoke Webpack without any arguments.</p> <pre><code class=language-bash>$ webpack</code></pre> <p>Some command-line options you should know.</p> <ul> <li><code>webpack</code> – building for development</li> <li><code>webpack -p</code> – building for production (minification)</li> <li><code>webpack --watch</code> – for continuous incremental building</li> <li><code>webpack -d</code> – including source maps</li> <li><code>webpack --colors</code> – making building output pretty</li> </ul> <p>You could customize <code>scripts</code> field in your package.json file as following.</p> <pre><code class=language-javascript>// package.json\n{\n  // ...\n  &quot;scripts&quot;: {\n    &quot;dev&quot;: &quot;webpack-dev-server --devtool eval --progress --colors&quot;,\n    &quot;deploy&quot;: &quot;NODE_ENV=production webpack -p&quot;\n  },\n  // ...\n}</code></pre> <h2 id=index>Index</h2> <ol> <li><a href=#demo01-entry-file-source>Entry file</a></li> <li><a href=#demo02-multiple-entry-files-source>Multiple entry files</a></li> <li><a href=#demo03-babel-loader-source>Babel-loader</a></li> <li><a href=#demo04-css-loader-source>CSS-loader</a></li> <li><a href=#demo05-image-loader-source>Image loader</a></li> <li><a href=#demo06-css-module-source>CSS Module</a></li> <li><a href=#demo07-uglifyjs-plugin-source>UglifyJs Plugin</a></li> <li><a href=#demo08-html-webpack-plugin-and-open-browser-webpack-plugin-source>HTML Webpack Plugin and Open Browser Webpack Plugin</a></li> <li><a href=#demo09-environment-flags-source>Environment flags</a></li> <li><a href=#demo10-code-splitting-source>Code splitting</a></li> <li><a href=#demo11-code-splitting-with-bundle-loader-source>Code splitting with bundle-loader</a></li> <li><a href=#demo12-common-chunk-source>Common chunk</a></li> <li><a href=#demo13-vendor-chunk-source>Vendor chunk</a></li> <li><a href=#demo14-exposing-global-variables-source>Exposing Global Variables</a></li> <li><a href=#demo15-react-router-source>React router</a></li> </ol> <h2 id=demo01-entry-file-source->Demo01: Entry file (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo01>source</a>)</h2> <p>Entry file is a file which Webpack reads to build <code>bundle.js</code>.</p> <p>For example, <code>main.js</code> is an entry file.</p> <pre><code class=language-javascript>// main.js\ndocument.write(&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>Webpack follows <code>webpack.config.js</code> to build <code>bundle.js</code>.</p> <pre><code class=language-javascript>// webpack.config.js\nmodule.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  }\n};</code></pre> <p>Launch the server, visit <a href=http://127.0.0.1:8080>http://127.0.0.1:8080</a> .</p> <pre><code class=language-bash>$ cd demo01\n$ npm run dev</code></pre> <h2 id=demo02-multiple-entry-files-source->Demo02: Multiple entry files (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo02>source</a>)</h2> <p>Multiple entry files are allowed. It is useful for a multi-page app which has different entry file for each page.</p> <pre><code class=language-javascript>// main1.js\ndocument.write(&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;);\n\n// main2.js\ndocument.write(&#39;&lt;h2&gt;Hello Webpack&lt;/h2&gt;&#39;);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;script src=&quot;bundle1.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;bundle2.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: {\n    bundle1: &#39;./main1.js&#39;,\n    bundle2: &#39;./main2.js&#39;\n  },\n  output: {\n    filename: &#39;[name].js&#39;\n  }\n};</code></pre> <h2 id=demo03-babel-loader-source->Demo03: Babel-loader (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo03>source</a>)</h2> <p>Loaders are preprocessors which transform a resource file of your app (<a href=http://webpack.github.io/docs/using-loaders.html>more info</a>) before Webpack&#39;s building process.</p> <p>For example, <a href=https://www.npmjs.com/package/babel-loader>Babel-loader</a> can transform JSX/ES6 file into normal JS files，after which Webpack will begin to build these JS files. Webpack&#39;s official doc has a complete list of <a href=http://webpack.github.io/docs/list-of-loaders.html>loaders</a>.</p> <p><code>main.jsx</code> is a JSX file.</p> <pre><code class=language-javascript>// main.jsx\nconst React = require(&#39;react&#39;);\nconst ReactDOM = require(&#39;react-dom&#39;);\n\nReactDOM.render(\n  &lt;h1&gt;Hello, world!&lt;/h1&gt;,\n  document.querySelector(&#39;#wrapper&#39;)\n);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;div id=&quot;wrapper&quot;&gt;&lt;/div&gt;\n    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./main.jsx&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: &#39;babel-loader&#39;,\n          options: {\n            presets: [&#39;es2015&#39;, &#39;react&#39;]\n          }\n        }\n      }\n    ]\n  }\n};</code></pre> <p>The above snippet uses <code>babel-loader</code> which needs Babel&#39;s preset plugins <a href=https://www.npmjs.com/package/babel-preset-es2015>babel-preset-es2015</a> and <a href=https://www.npmjs.com/package/babel-preset-react>babel-preset-react</a> to transpile ES6 and React.</p> <h2 id=demo04-css-loader-source->Demo04: CSS-loader (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo04>source</a>)</h2> <p>Webpack allows you to include CSS in JS file, then preprocessed CSS file with <a href=https://github.com/webpack-contrib/css-loader>CSS-loader</a>.</p> <p>main.js</p> <pre><code class=language-javascript>require(&#39;./app.css&#39;);</code></pre> <p>app.css</p> <pre><code class=language-css>body {\n  background-color: blue;\n}</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;head&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello World&lt;/h1&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules:[\n      {\n        test: /\\.css$/,\n        use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]\n      },\n    ]\n  }\n};</code></pre> <p>Attention, you have to use two loaders to transform CSS file. First is <a href=https://www.npmjs.com/package/css-loader>CSS-loader</a> to read CSS file, and another one is <a href=https://www.npmjs.com/package/style-loader>Style-loader</a> to insert <code>&lt;style&gt;</code> tag into HTML page.</p> <p>Then, launch the server.</p> <pre><code class=language-bash>$ cd demo04\n$ npm run dev</code></pre> <p>Actually, Webpack inserts an internal style sheet into <code>index.html</code>.</p> <pre><code class=language-html>&lt;head&gt;\n  &lt;script type=&quot;text/javascript&quot; src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;style type=&quot;text/css&quot;&gt;\n    body {\n      background-color: blue;\n    }\n  &lt;/style&gt;\n&lt;/head&gt;</code></pre> <h2 id=demo05-image-loader-source->Demo05: Image loader (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo05>source</a>)</h2> <p>Webpack could also include images in JS files.</p> <p>main.js</p> <pre><code class=language-javascript>var img1 = document.createElement(&quot;img&quot;);\nimg1.src = require(&quot;./small.png&quot;);\ndocument.body.appendChild(img1);\n\nvar img2 = document.createElement(&quot;img&quot;);\nimg2.src = require(&quot;./big.png&quot;);\ndocument.body.appendChild(img2);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;script type=&quot;text/javascript&quot; src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules:[\n      {\n        test: /\\.(png|jpg)$/,\n        use: [\n          {\n            loader: &#39;url-loader&#39;,\n            options: {\n              limit: 8192\n            }\n          }\n        ]\n      }\n    ]\n  }\n};</code></pre> <p><a href=https://www.npmjs.com/package/url-loader>url-loader</a> transforms image files into <code>&lt;img&gt;</code> tag. If the image size is smaller than 8192 bytes, it will be transformed into Data URL; otherwise, it will be transformed into normal URL.</p> <p>After launching the server, <code>small.png</code> and <code>big.png</code> have the following URLs.</p> <pre><code class=language-html>&lt;img src=&quot;data:image/png;base64,iVBOR...uQmCC&quot;&gt;\n&lt;img src=&quot;4853ca667a2b8b8844eb2693ac1b2578.png&quot;&gt;</code></pre> <h2 id=demo06-css-module-source->Demo06: CSS Module (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo06>source</a>)</h2> <p><code>css-loader?modules</code> (the query parameter modules) enables the <a href=https://github.com/css-modules/css-modules>CSS Module</a> which gives a local scoped CSS to your JS module&#39;s CSS. You can switch it off with <code>:global(selector)</code> (<a href=https://css-modules.github.io/webpack-demo/ >more info</a>).</p> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n&lt;body&gt;\n  &lt;h1 class=&quot;h1&quot;&gt;Hello World&lt;/h1&gt;\n  &lt;h2 class=&quot;h2&quot;&gt;Hello Webpack&lt;/h2&gt;\n  &lt;div id=&quot;example&quot;&gt;&lt;/div&gt;\n  &lt;script src=&quot;./bundle.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>app.css</p> <pre><code class=language-css>/* local scope */\n.h1 {\n  color:red;\n}\n\n/* global scope */\n:global(.h2) {\n  color: blue;\n}</code></pre> <p>main.jsx</p> <pre><code class=language-javascript>var React = require(&#39;react&#39;);\nvar ReactDOM = require(&#39;react-dom&#39;);\nvar style = require(&#39;./app.css&#39;);\n\nReactDOM.render(\n  &lt;div&gt;\n    &lt;h1 className={style.h1}&gt;Hello World&lt;/h1&gt;\n    &lt;h2 className=&quot;h2&quot;&gt;Hello Webpack&lt;/h2&gt;\n  &lt;/div&gt;,\n  document.getElementById(&#39;example&#39;)\n);</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./main.jsx&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules:[\n      {\n        test: /\\.js[x]?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: &#39;babel-loader&#39;,\n          options: {\n            presets: [&#39;es2015&#39;, &#39;react&#39;]\n          }\n        }\n      },\n      {\n        test: /\\.css$/,\n        use: [\n          {\n            loader: &#39;style-loader&#39;\n          },\n          {\n             loader: &#39;css-loader&#39;,\n             options: {\n               modules: true\n             }\n          }\n        ]\n      }\n    ]\n  }\n};</code></pre> <p>Launch the server.</p> <pre><code class=language-bash>$ cd demo06\n$ npm run dev</code></pre> <p>Visiting <a href=http://127.0.0.1:8080>http://127.0.0.1:8080</a> , you&#39;ll find that only second <code>h1</code> is red, because its CSS is local scoped, and both <code>h2</code> is blue, because its CSS is global scoped.</p> <h2 id=demo07-uglifyjs-plugin-source->Demo07: UglifyJs Plugin (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo07>source</a>)</h2> <p>Webpack has a plugin system to expand its functions. For example, <a href=https://webpack.js.org/plugins/uglifyjs-webpack-plugin/ >UglifyJs Plugin</a> will minify output(<code>bundle.js</code>) JS codes.</p> <p>main.js</p> <pre><code class=language-javascript>var longVariableName = &#39;Hello&#39;;\nlongVariableName += &#39; World&#39;;\ndocument.write(&#39;&lt;h1&gt;&#39; + longVariableName + &#39;&lt;/h1&gt;&#39;);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n&lt;body&gt;\n  &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>var webpack = require(&#39;webpack&#39;);\nvar UglifyJsPlugin = require(&#39;uglifyjs-webpack-plugin&#39;);\n\nmodule.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  plugins: [\n    new UglifyJsPlugin()\n  ]\n};</code></pre> <p>After launching the server, <code>main.js</code> will be minified into following.</p> <pre><code class=language-javascript>var o=&quot;Hello&quot;;o+=&quot; World&quot;,document.write(&quot;&lt;h1&gt;&quot;+o+&quot;&lt;/h1&gt;&quot;)</code></pre> <h2 id=demo08-html-webpack-plugin-and-open-browser-webpack-plugin-source->Demo08: HTML Webpack Plugin and Open Browser Webpack Plugin (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo08>source</a>)</h2> <p>This demo shows you how to load 3rd-party plugins.</p> <p><a href=https://github.com/ampedandwired/html-webpack-plugin>html-webpack-plugin</a> could create <code>index.html</code> for you, and <a href=https://github.com/baldore/open-browser-webpack-plugin>open-browser-webpack-plugin</a> could open a new browser tab when Webpack loads.</p> <p>main.js</p> <pre><code class=language-javascript>document.write(&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;);</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>var HtmlwebpackPlugin = require(&#39;html-webpack-plugin&#39;);\nvar OpenBrowserPlugin = require(&#39;open-browser-webpack-plugin&#39;);\n\nmodule.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  plugins: [\n    new HtmlwebpackPlugin({\n      title: &#39;Webpack-demos&#39;,\n      filename: &#39;index.html&#39;\n    }),\n    new OpenBrowserPlugin({\n      url: &#39;http://localhost:8080&#39;\n    })\n  ]\n};</code></pre> <p>Launch the server.</p> <pre><code class=language-bash>$ cd demo08\n$ npm run dev</code></pre> <p>Now you don&#39;t need to write <code>index.html</code> by hand and don&#39;t have to open browser by yourself. Webpack did all these things for you.</p> <h2 id=demo09-environment-flags-source->Demo09: Environment flags (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo09>source</a>)</h2> <p>You can enable some codes only in development environment with environment flags.</p> <p>main.js</p> <pre><code class=language-javascript>document.write(&#39;&lt;h1&gt;Hello World&lt;/h1&gt;&#39;);\n\nif (__DEV__) {\n  document.write(new Date());\n}</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n&lt;body&gt;\n  &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>var webpack = require(&#39;webpack&#39;);\n\nvar devFlagPlugin = new webpack.DefinePlugin({\n  __DEV__: JSON.stringify(JSON.parse(process.env.DEBUG || &#39;false&#39;))\n});\n\nmodule.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  plugins: [devFlagPlugin]\n};</code></pre> <p>Now pass environment variable into webpack. Opening <code>demo09/package.json</code>, you should find <code>scripts</code> field as following.</p> <pre><code class=language-javascript>// package.json\n{\n  // ...\n  &quot;scripts&quot;: {\n    &quot;dev&quot;: &quot;cross-env DEBUG=true webpack-dev-server --open&quot;,\n  },\n  // ...\n}</code></pre> <p>Launch the server.</p> <pre><code class=language-javascript>$ cd demo09\n$ npm run dev</code></pre> <h2 id=demo10-code-splitting-source->Demo10: Code splitting (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo10>source</a>)</h2> <p>For big web apps, it’s not efficient to put all code into a single file. Webpack allows you to split a large JS file into several chunks. Especially, if some blocks of code are only required under some circumstances, these chunks could be loaded on demand.</p> <p>Webpack uses <code>require.ensure</code> to define a split point (<a href=http://webpack.github.io/docs/code-splitting.html>official document</a>).</p> <pre><code class=language-javascript>// main.js\nrequire.ensure([&#39;./a&#39;], function (require) {\n  var content = require(&#39;./a&#39;);\n  document.open();\n  document.write(&#39;&lt;h1&gt;&#39; + content + &#39;&lt;/h1&gt;&#39;);\n  document.close();\n});</code></pre> <p><code>require.ensure</code> tells Webpack that <code>./a.js</code> should be separated from <code>bundle.js</code> and built into a single chunk file.</p> <pre><code class=language-javascript>// a.js\nmodule.exports = &#39;Hello World&#39;;</code></pre> <p>Now Webpack takes care of the dependencies, output files and runtime stuff. You don&#39;t have to put any redundancy into your <code>index.html</code> and <code>webpack.config.js</code>.</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./main.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  }\n};</code></pre> <p>Launch the server.</p> <pre><code class=language-bash>$ cd demo10\n$ npm run dev</code></pre> <p>On the surface, you won&#39;t feel any differences. However, Webpack actually builds <code>main.js</code> and <code>a.js</code> into different chunks(<code>bundle.js</code> and <code>0.bundle.js</code>), and loads <code>0.bundle.js</code> from <code>bundle.js</code> when on demand.</p> <h2 id=demo11-code-splitting-with-bundle-loader-source->Demo11: Code splitting with bundle-loader (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo11>source</a>)</h2> <p>Another way of code splitting is using <a href=https://www.npmjs.com/package/bundle-loader>bundle-loader</a>.</p> <pre><code class=language-javascript>// main.js\n\n// Now a.js is requested, it will be bundled into another file\nvar load = require(&#39;bundle-loader!./a.js&#39;);\n\n// To wait until a.js is available (and get the exports)\n//  you need to async wait for it.\nload(function(file) {\n  document.open();\n  document.write(&#39;&lt;h1&gt;&#39; + file + &#39;&lt;/h1&gt;&#39;);\n  document.close();\n});</code></pre> <p><code>require(&#39;bundle-loader!./a.js&#39;)</code> tells Webpack to load <code>a.js</code> from another chunk.</p> <p>Now Webpack will build <code>main.js</code> into <code>bundle.js</code>, and <code>a.js</code> into <code>0.bundle.js</code>.</p> <h2 id=demo12-common-chunk-source->Demo12: Common chunk (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo12>source</a>)</h2> <p>When multi scripts have common chunks, you can extract the common part into a separate file with <a href=https://webpack.js.org/plugins/commons-chunk-plugin/ >CommonsChunkPlugin</a>, which is useful for browser caching and saving bandwidth.</p> <pre><code class=language-javascript>// main1.jsx\nvar React = require(&#39;react&#39;);\nvar ReactDOM = require(&#39;react-dom&#39;);\n\nReactDOM.render(\n  &lt;h1&gt;Hello World&lt;/h1&gt;,\n  document.getElementById(&#39;a&#39;)\n);\n\n// main2.jsx\nvar React = require(&#39;react&#39;);\nvar ReactDOM = require(&#39;react-dom&#39;);\n\nReactDOM.render(\n  &lt;h2&gt;Hello Webpack&lt;/h2&gt;,\n  document.getElementById(&#39;b&#39;)\n);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;div id=&quot;a&quot;&gt;&lt;/div&gt;\n    &lt;div id=&quot;b&quot;&gt;&lt;/div&gt;\n    &lt;script src=&quot;commons.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;bundle1.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;bundle2.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>The above <code>commons.js</code> is the common chunk of <code>main1.jsx</code> and <code>main2.jsx</code>. As you can imagine, <code>commons.js</code> includes <code>react</code> and <code>react-dom</code>.</p> <p>webpack.config.js</p> <pre><code class=language-javascript>var webpack = require(&#39;webpack&#39;);\n\nmodule.exports = {\n  entry: {\n    bundle1: &#39;./main1.jsx&#39;,\n    bundle2: &#39;./main2.jsx&#39;\n  },\n  output: {\n    filename: &#39;[name].js&#39;\n  },\n  module: {\n    rules:[\n      {\n        test: /\\.js[x]?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: &#39;babel-loader&#39;,\n          options: {\n            presets: [&#39;es2015&#39;, &#39;react&#39;]\n          }\n        }\n      },\n    ]\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: &quot;commons&quot;,\n      // (the commons chunk name)\n\n      filename: &quot;commons.js&quot;,\n      // (the filename of the commons chunk)\n    })\n  ]\n}</code></pre> <h2 id=demo13-vendor-chunk-source->Demo13: Vendor chunk (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo13>source</a>)</h2> <p>You can also extract the vendor libraries from a script into a separate file with CommonsChunkPlugin.</p> <p>main.js</p> <pre><code class=language-javascript>var $ = require(&#39;jquery&#39;);\n$(&#39;h1&#39;).text(&#39;Hello World&#39;);</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;h1&gt;&lt;/h1&gt;\n    &lt;script src=&quot;vendor.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>webpack.config.js</p> <pre><code class=language-javascript>var webpack = require(&#39;webpack&#39;);\n\nmodule.exports = {\n  entry: {\n    app: &#39;./main.js&#39;,\n    vendor: [&#39;jquery&#39;],\n  },\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: &#39;vendor&#39;,\n      filename: &#39;vendor.js&#39;\n    })\n  ]\n};</code></pre> <p>In above codes, <code>entry.vendor: [&#39;jquery&#39;]</code> tells Webpack that <code>jquery</code> should be included in the common chunk <code>vendor.js</code>.</p> <p>If you want a module available as a global variable in every module, such as making <code>$</code> and <code>jQuery</code> available in every module without writing <code>require(&quot;jquery&quot;)</code>. You should use <code>ProvidePlugin</code> (<a href=https://webpack.js.org/plugins/provide-plugin/ >Official doc</a>) which automatically loads modules instead of having to import or require them everywhere.</p> <pre><code class=language-javascript>// main.js\n$(&#39;h1&#39;).text(&#39;Hello World&#39;);\n\n\n// webpack.config.js\nvar webpack = require(&#39;webpack&#39;);\n\nmodule.exports = {\n  entry: {\n    app: &#39;./main.js&#39;\n  },\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  plugins: [\n    new webpack.ProvidePlugin({\n      $: &#39;jquery&#39;,\n      jQuery: &#39;jquery&#39;\n    })\n  ]\n};</code></pre> <p>Of course, in this case, you should load <code>jquery.js</code> globally by yourself.</p> <h2 id=demo14-exposing-global-variables-source->Demo14: Exposing global variables (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo14>source</a>)</h2> <p>If you want to use some global variables, and don&#39;t want to include them in the Webpack bundle, you can enable <code>externals</code> field in <code>webpack.config.js</code> (<a href=https://webpack.js.org/configuration/externals/ >official document</a>).</p> <p>For example, we have a <code>data.js</code>.</p> <pre><code class=language-javascript>// data.js\nvar data = &#39;Hello World&#39;;</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;script src=&quot;data.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre> <p>Attention, Webpack will only build <code>bundle.js</code>, but not <code>data.js</code>.</p> <p>We can expose <code>data</code> as a global variable.</p> <pre><code class=language-javascript>// webpack.config.js\nmodule.exports = {\n  entry: &#39;./main.jsx&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules:[\n      {\n        test: /\\.js[x]?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: &#39;babel-loader&#39;,\n          options: {\n            presets: [&#39;es2015&#39;, &#39;react&#39;]\n          }\n        }\n      },\n    ]\n  },\n  externals: {\n    // require(&#39;data&#39;) is external and available\n    //  on the global var data\n    &#39;data&#39;: &#39;data&#39;\n  }\n};</code></pre> <p>Now, you require <code>data</code> as a module variable in your script. but it actually is a global variable.</p> <pre><code class=language-javascript>// main.jsx\nvar data = require(&#39;data&#39;);\nvar React = require(&#39;react&#39;);\nvar ReactDOM = require(&#39;react-dom&#39;);\n\nReactDOM.render(\n  &lt;h1&gt;{data}&lt;/h1&gt;,\n  document.body\n);</code></pre> <p>You could also put <code>react</code> and <code>react-dom</code> into <code>externals</code>, which will greatly decreace the building time and building size of <code>bundle.js</code>.</p> <h2 id=demo15-react-router-source->Demo15: React router (<a href=https://github.com/ruanyf/webpack-demos/tree/master/demo15>source</a>)</h2> <p>This demo uses webpack to build <a href=https://github.com/rackt/react-router/blob/0.13.x/docs/guides/overview.md>React-router</a>&#39;s official example.</p> <p>Let&#39;s imagine a little app with a dashboard, inbox, and calendar.</p> <pre><code>+---------------------------------------------------------+\n| +---------+ +-------+ +--------+                        |\n| |Dashboard| | Inbox | |Calendar|      Logged in as Jane |\n| +---------+ +-------+ +--------+                        |\n+---------------------------------------------------------+\n|                                                         |\n|                        Dashboard                        |\n|                                                         |\n|                                                         |\n|   +---------------------+    +----------------------+   |\n|   |                     |    |                      |   |\n|   | +              +    |    +---------&gt;            |   |\n|   | |              |    |    |                      |   |\n|   | |   +          |    |    +-------------&gt;        |   |\n|   | |   |    +     |    |    |                      |   |\n|   | |   |    |     |    |    |                      |   |\n|   +-+---+----+-----+----+    +----------------------+   |\n|                                                         |\n+---------------------------------------------------------+</code></pre><p>webpack.config.js</p> <pre><code class=language-javascript>module.exports = {\n  entry: &#39;./index.js&#39;,\n  output: {\n    filename: &#39;bundle.js&#39;\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.css$/,\n        use: [ &#39;style-loader&#39;, &#39;css-loader&#39; ]\n      },\n      {\n        test: /\\.jsx?$/,\n        exclude: /node_modules/,\n        use: {\n          loader: &#39;babel-loader&#39;,\n          options: {\n            presets: [&#39;es2015&#39;, &#39;react&#39;]\n          }\n        }\n      },\n    ]\n  }\n};</code></pre> <p>index.js</p> <pre><code class=language-javascript>import React from &#39;react&#39;;\nimport { render } from &#39;react-dom&#39;;\nimport { BrowserRouter, Switch, Route, Link } from &#39;react-router-dom&#39;;\n\nimport &#39;./app.css&#39;;\n\nclass App extends React.Component {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;header&gt;\n          &lt;ul&gt;\n            &lt;li&gt;&lt;Link to=&quot;/app&quot;&gt;Dashboard&lt;/Link&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;Link to=&quot;/inbox&quot;&gt;Inbox&lt;/Link&gt;&lt;/li&gt;\n            &lt;li&gt;&lt;Link to=&quot;/calendar&quot;&gt;Calendar&lt;/Link&gt;&lt;/li&gt;\n          &lt;/ul&gt;\n          Logged in as Jane\n        &lt;/header&gt;\n        &lt;main&gt;\n          &lt;Switch&gt;\n            &lt;Route exact path=&quot;/&quot; component={Dashboard}/&gt;\n            &lt;Route path=&quot;/app&quot; component={Dashboard}/&gt;\n            &lt;Route path=&quot;/inbox&quot; component={Inbox}/&gt;\n            &lt;Route path=&quot;/calendar&quot; component={Calendar}/&gt;\n            &lt;Route path=&quot;*&quot; component={Dashboard}/&gt;\n          &lt;/Switch&gt;\n        &lt;/main&gt;\n      &lt;/div&gt;\n    );\n  }\n};\n\nclass Dashboard extends React.Component {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;p&gt;Dashboard&lt;/p&gt;\n      &lt;/div&gt;\n    );\n  }\n};\n\nclass Inbox extends React.Component {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;p&gt;Inbox&lt;/p&gt;\n      &lt;/div&gt;\n    );\n  }\n};\n\nclass Calendar extends React.Component {\n  render() {\n    return (\n      &lt;div&gt;\n        &lt;p&gt;Calendar&lt;/p&gt;\n      &lt;/div&gt;\n    );\n  }\n};\n\nrender((\n  &lt;BrowserRouter&gt;\n    &lt;Route path=&quot;/&quot; component={App} /&gt;\n  &lt;/BrowserRouter&gt;\n), document.querySelector(&#39;#app&#39;));</code></pre> <p>index.html</p> <pre><code class=language-html>&lt;html&gt;\n  &lt;body&gt;\n    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;\n    &lt;script src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;\n  &lt;/body&gt;\n&lt;/htmL&gt;</code></pre> <p>Launch the server.</p> <pre><code class=language-bash>$ cd demo15\n$ npm run dev</code></pre> <h2 id=useful-links>Useful links</h2> <ul> <li><a href=https://webpack.js.org/concepts/ >Webpack docs</a></li> <li><a href=https://github.com/petehunt/webpack-howto>webpack-howto</a>, by Pete Hunt</li> <li><a href=https://survivejs.com/webpack/introduction/ >SurviveJS Webpack book</a>, by Juho Vepsäläinen</li> <li><a href=https://web-design-weekly.com/2014/09/24/diving-webpack/ >Diving into Webpack</a>, by Web Design Weekly</li> <li><a href=http://www.christianalfoni.com/articles/2014_12_13_Webpack-and-react-is-awesome>Webpack and React is awesome</a>, by Christian Alfoni</li> <li><a href=https://medium.com/@housecor/browserify-vs-webpack-b3d7ca08a0a9>Browserify vs Webpack</a>, by Cory House</li> </ul> <h2 id=license>License</h2> <p>MIT</p> ";

/***/ })
/******/ ]);